<!DOCTYPE html>
<html>
<head>
    <title>CutList Cache Test</title>
    <style>
        body { 
            background: #1a1a1a; 
            color: white; 
            font-family: Arial, sans-serif; 
            padding: 20px; 
        }
        .result { 
            margin: 10px 0; 
            padding: 10px; 
            background: rgba(255, 255, 255, 0.1); 
            border-radius: 5px; 
        }
        .success { background: rgba(0, 255, 0, 0.2); }
        .error { background: rgba(255, 0, 0, 0.2); }
    </style>
</head>
<body>
    <h1>Master - CutList Cache Test</h1>
    <div id="results"></div>

    <script type="module">
        const resultsDiv = document.getElementById('results');
        
        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `result ${type}`;
            div.textContent = message;
            resultsDiv.appendChild(div);
        }
        
        addResult('üöÄ Starting cache verification test...');
        
        // Test 1: Check if main.js contains our Opus solution
        try {
            const response = await fetch('./src/main.js');
            const mainJsContent = await response.text();
            
            if (mainJsContent.includes('OPUS ROBUST SOLUTION')) {
                addResult('‚úÖ main.js contains Opus robust solution', 'success');
            } else {
                addResult('‚ùå main.js does NOT contain Opus robust solution', 'error');
            }
            
            if (mainJsContent.includes('handleExtrusionUpdate')) {
                addResult('‚úÖ main.js contains handleExtrusionUpdate function', 'success');
            } else {
                addResult('‚ùå main.js missing handleExtrusionUpdate function', 'error');
            }
            
        } catch (error) {
            addResult(`‚ùå Failed to fetch main.js: ${error.message}`, 'error');
        }
        
        // Test 2: Check extrusionGizmo.js
        try {
            const response = await fetch('./src/modules/extrusionGizmo.js');
            const gizmoContent = await response.text();
            
            if (gizmoContent.includes('v20250630_003')) {
                addResult('‚úÖ extrusionGizmo.js contains latest version v20250630_003', 'success');
            } else {
                addResult('‚ùå extrusionGizmo.js does NOT contain latest version', 'error');
            }
            
        } catch (error) {
            addResult(`‚ùå Failed to fetch extrusionGizmo.js: ${error.message}`, 'error');
        }
        
        // Test 3: Check timestamp
        addResult(`üïí Test completed at: ${new Date().toISOString()}`);
        addResult('üéØ Master, if all tests pass, the correct code is loaded!');
        
        console.log('üéØ MASTER - Spanky cache test completed');
    </script>
</body>
</html>
