<!DOCTYPE html>
<html>
<head>
    <title>Perspective Grid Test</title>
    <script src="https://preview.babylonjs.com/babylon.js"></script>
    <script src="https://preview.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
    <style>
        html, body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
    </style>
</head>
<body>
    <canvas id="renderCanvas"></canvas>
    <script>
        const canvas = document.getElementById('renderCanvas');
        const engine = new BABYLON.Engine(canvas, true);
        const scene = new BABYLON.Scene(engine);

        // Perspective camera
        const camera = new BABYLON.ArcRotateCamera("camera", Math.PI / 4, Math.PI / 4, 10, BABYLON.Vector3.Zero(), scene);
        camera.attachControl(canvas, true);

        // Light
        const light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0, 1, 0), scene);

        // Ground
        const groundMaterial = new BABYLON.StandardMaterial("groundMaterial", scene);
        groundMaterial.diffuseColor = new BABYLON.Color3(0.5, 0.5, 0.5);
        groundMaterial.specularColor = new BABYLON.Color3(0, 0, 0);

        const ground = BABYLON.MeshBuilder.CreateGround("ground", { width: 100, height: 100 }, scene);
        ground.material = groundMaterial;

        console.log('Applying GridMaterial to ground mesh');
        const gridMaterial = new BABYLON.GridMaterial("grid", scene);
        gridMaterial.gridRatio = 0.5; // Smaller grid cells
        gridMaterial.majorUnitFrequency = 5; // Major lines every 5 units
        gridMaterial.minorUnitVisibility = 1; // Make minor lines fully visible
        gridMaterial.lineColor = new BABYLON.Color3(1, 1, 1); // White grid lines
        gridMaterial.backFaceCulling = false;
        ground.material = gridMaterial;
        console.log('GridMaterial applied successfully');

        // Render loop
        engine.runRenderLoop(() => {
            scene.render();
        });

        // Resize event
        window.addEventListener('resize', () => {
            engine.resize();
        });
    </script>
</body>
</html>
